<!-- Save this as dashboard.html and ensure your JSON file is in the same folder -->

<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>All-in-One Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #f4f6f8;
      --text: #1e1e1e;
      --card: #ffffff;
      --accent: #1976d2;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #f0f0f0;
      --card: #1e1e1e;
      --accent: #4fc3f7;
    }
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
    }
    header {
      background: var(--accent);
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
    }
    #main {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
      grid-auto-rows: minmax(100px, auto);
      gap: 1rem;
      padding: 1rem;
      height: calc(100vh - 80px);
      overflow-y: auto;
    }
    .card {
      background: var(--card);
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: auto;
    }
    h2 { margin-top: 0; color: var(--accent); }
    input, textarea, select, button {
      width: 100%; padding: 0.5rem; margin: 0.3rem 0; font-size: 1rem;
    }
    ul { list-style: none; padding: 0; }
    li { margin: 0.3rem 0; padding: 0.5rem; background: var(--bg); border-left: 4px solid var(--accent); border-radius: 5px; }
    .complete { text-decoration: line-through; opacity: 0.6; }
    canvas { max-width: 100%; margin-top: 1rem; }
    .toggle-btn {
      position: fixed;
      top: 10px;
      right: 10px;
      padding: 0.3rem 0.6rem;
      background: #fff;
      border: 1px solid var(--accent);
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <button class="toggle-btn" onclick="toggleTheme()">üåì Theme</button>
  <header>üöÄ Your Productivity & Study Dashboard</header>
  <div id="main">
    <div class="card">
      <h2>‚è∞ Clock</h2>
      <div id="clock" style="font-size:2rem;"></div>
    </div>

    <div class="card">
      <h2>üìã Add Task</h2>
      <input id="taskInput" placeholder="Task" />
      <select id="taskType">
        <option>Personal</option><option>Professional</option><option>School</option>
        <option>Financial</option><option>Work</option><option>Family</option>
        <option>Health</option><option>Spiritual</option><option>Creative</option>
      </select>
      <select id="priority"><option>High</option><option>Mid</option><option>Low</option></select>
      <input type="datetime-local" id="deadline" />
      <textarea id="notes" placeholder="Optional notes..."></textarea>
      <button onclick="addTask()">Add</button>
    </div>

    <div class="card">
      <h2>‚úÖ Task List</h2>
      <ul id="taskList"></ul>
    </div>

    <div class="card">
      <h2>üì§ Export / Heatmap</h2>
      <select id="exportRange">
        <option value="today">Today</option>
        <option value="week">This Week</option>
        <option value="month">This Month</option>
      </select>
      <button onclick="exportCSV()">Export CSV</button>
      <canvas id="taskChart"></canvas>
      <canvas id="taskHeat"></canvas>
    </div>

    <div class="card">
      <h2>üß† Topic to Learn</h2>
      <div id="studyTopic">Loading topic...</div>
    </div>

    <div class="card">
      <h2>üìö Study Log</h2>
      <textarea id="studyLog" placeholder="What did you study today?"></textarea>
    </div>

    <div class="card">
      <h2>üå± Later Goals & Ideas</h2>
      <textarea id="ideas" placeholder="Type an idea or goal..."></textarea>
      <button onclick="saveIdea()">Save</button>
      <ul id="ideaList"></ul>
    </div>

    <div class="card">
      <h2>üéØ Quiz</h2>
      <div id="quizQ">What is Python used for?</div>
      <ul id="quizOpts">
        <li><button onclick="checkQuiz(0)">Web Design</button></li>
        <li><button onclick="checkQuiz(1)">Data Analysis</button></li>
        <li><button onclick="checkQuiz(2)">Image Editing</button></li>
      </ul>
      <div id="quizResult"></div>
    </div>
  </div>

  <script>
    // CLOCK
    setInterval(() => {
      document.getElementById(\"clock\").textContent = new Date().toLocaleTimeString();
    }, 1000);

    // THEME TOGGLE
    function toggleTheme() {
      let theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', theme);
    }

    // TASKS
    let tasks = JSON.parse(localStorage.getItem('myTasks') || '[]');
    function addTask() {
      const t = {
        text: taskInput.value,
        type: taskType.value,
        priority: priority.value,
        deadline: deadline.value,
        notes: notes.value,
        date: new Date().toLocaleDateString(),
        time: new Date().toLocaleTimeString(),
        completed: false
      };
      tasks.push(t);
      localStorage.setItem('myTasks', JSON.stringify(tasks));
      renderTasks();
    }

    function renderTasks() {
      taskList.innerHTML = '';
      tasks.forEach((t, i) => {
        const li = document.createElement('li');
        li.className = t.completed ? 'complete' : '';
        li.innerHTML = \`\${t.text} <br><small>\${t.type} | \${t.priority} | \${t.deadline || 'No deadline'}</small>
        <br><button onclick=\"toggleTask(\${i})\">‚úî</button> <button onclick=\"deleteTask(\${i})\">üóë</button>\`;
        taskList.appendChild(li);
      });
    }

    function toggleTask(i) {
      tasks[i].completed = !tasks[i].completed;
      localStorage.setItem('myTasks', JSON.stringify(tasks));
      renderTasks();
    }
    function deleteTask(i) {
      if (confirm(\"Delete this task?\")) tasks.splice(i, 1);
      localStorage.setItem('myTasks', JSON.stringify(tasks));
      renderTasks();
    }
    renderTasks();

    // QUIZ
    function checkQuiz(i) {
      document.getElementById(\"quizResult\").textContent = i === 1 ? \"‚úÖ Correct!\" : \"‚ùå Nope. Try again.\";
    }

    // IDEAS
    const ideas = JSON.parse(localStorage.getItem(\"myIdeas\") || \"[]\");
    function saveIdea() {
      const text = document.getElementById(\"ideas\").value;
      if (text) {
        ideas.push(text);
        localStorage.setItem(\"myIdeas\", JSON.stringify(ideas));
        renderIdeas();
        document.getElementById(\"ideas\").value = '';
      }
    }
    function renderIdeas() {
      const list = document.getElementById(\"ideaList\");
      list.innerHTML = '';
      ideas.forEach(i => {
        const li = document.createElement(\"li\");
        li.textContent = i;
        list.appendChild(li);
      });
    }
    renderIdeas();

    // TOPICS
    async function loadTopics() {
      const res = await fetch(\"detailed_data_science_topics.json\");
      const data = await res.json();
      const random = data[Math.floor(Math.random() * data.length)];
      document.getElementById(\"studyTopic\").innerHTML = \`<strong>\${random.Category}:</strong> \${random.Topic}<br><em>\${random.Description}</em>\`;
    }
    loadTopics(); setInterval(loadTopics, 7200000);

    // CHARTS
    const ctx1 = document.getElementById('taskChart').getContext('2d');
    const ctx2 = document.getElementById('taskHeat').getContext('2d');
    const byType = {}; const byHour = Array(24).fill(0);
    tasks.forEach(t => {
      byType[t.type] = (byType[t.type] || 0) + 1;
      let hr = parseInt(t.time.split(\":\")[0]); byHour[hr]++;
    });
    new Chart(ctx1, {
      type: 'bar',
      data: { labels: Object.keys(byType), datasets: [{ label: 'By Type', data: Object.values(byType), backgroundColor: '#1976d2' }] }
    });
    new Chart(ctx2, {
      type: 'line',
      data: { labels: [...Array(24).keys()].map(h => h+\":00\"), datasets: [{ label: 'Hourly Activity', data: byHour, borderColor: '#4caf50' }] }
    });

    // EXPORT
    function exportCSV() {
      const range = document.getElementById(\"exportRange\").value;
      const now = new Date();
      const start = new Date(now);
      if (range === 'week') start.setDate(start.getDate() - 7);
      else if (range === 'month') start.setMonth(start.getMonth() - 1);
      const filtered = tasks.filter(t => new Date(t.date) >= start);
      const csv = \"Task,Type,Priority,Date,Time,Deadline,Notes\\n\" + filtered.map(t =>
        [t.text, t.type, t.priority, t.date, t.time, t.deadline, t.notes].join(',')
      ).join(\"\\n\");
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'tasks.csv'; a.click();
    }
  </script>
</body>
</html>
